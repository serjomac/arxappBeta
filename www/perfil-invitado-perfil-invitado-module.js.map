{"version":3,"sources":["webpack:///./src/app/perfil-invitado/perfil-invitado.module.ts","webpack:///./src/app/perfil-invitado/perfil-invitado.page.html","webpack:///./src/app/perfil-invitado/perfil-invitado.page.scss","webpack:///./src/app/perfil-invitado/perfil-invitado.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACF;AACU;AAEV;AAEe;AAE5D,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,wEAAkB;KAC9B;CACF,CAAC;AAWF;IAAA;IAAuC,CAAC;IAA3B,wBAAwB;QATpC,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;YACD,YAAY,EAAE,CAAC,wEAAkB,CAAC;SACnC,CAAC;OACW,wBAAwB,CAAG;IAAD,+BAAC;CAAA;AAAH;;;;;;;;;;;;ACzBrC,ykBAAykB,QAAQ,uTAAuT,cAAc,6d;;;;;;;;;;;ACAt5B,yBAAyB,iBAAiB,iBAAiB,gBAAgB,uBAAuB,gCAAgC,EAAE,sBAAsB,iBAAiB,iBAAiB,gBAAgB,uBAAuB,gCAAgC,EAAE,+CAA+C,u5B;;;;;;;;;;;;;;;;;;;;;;;;;ACA1P;AAC6B;AAC9C;AAKe;AACH;AACM;AAIpB;AAEyB;AACa;AAO7E;IASE,4BAAoB,MAAc,EAAU,qBAA4C,EAAU,IAAiB,EAAU,KAAsB,EAAU,QAA0B,EAAS,QAAgB,EAAS,MAAc,EAAU,QAAyB,EAAU,eAAuC,EAAU,KAAsB;QAAvU,WAAM,GAAN,MAAM,CAAQ;QAAU,0BAAqB,GAArB,qBAAqB,CAAuB;QAAU,SAAI,GAAJ,IAAI,CAAa;QAAU,UAAK,GAAL,KAAK,CAAiB;QAAU,aAAQ,GAAR,QAAQ,CAAkB;QAAS,aAAQ,GAAR,QAAQ,CAAQ;QAAS,WAAM,GAAN,MAAM,CAAQ;QAAU,aAAQ,GAAR,QAAQ,CAAiB;QAAU,oBAAe,GAAf,eAAe,CAAwB;QAAU,UAAK,GAAL,KAAK,CAAiB;QARpV,wBAAmB,GAAY,KAAK,CAAC;QAGrC,eAAU,GAAW,CAAC,CAAC;QACvB,kBAAa,GAAG,EAAE,CAAC;QAEnB,sBAAiB,GAAY,KAAK,CAAC;QACnC,mBAAc,GAAY,KAAK,CAAC;QAGrC,YAAY,CAAC,OAAO,CAAC,qBAAqB,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC;QAChE,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;QAC/C,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC;QACvD,UAAU;QACV,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,+CAA+C;IACjD,CAAC;IAED,sDAAyB,GAAzB;QAIE,IAAG,IAAI,CAAC,cAAc,EAAE;YACtB,qBAAqB;YACrB,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,IAAI,CAAC,UAAU,CAAC;YACtD,8BAA8B;YAC9B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAC1C,qBAAqB;YACrB,qFAAqF;SACtF;aAAI;YACH,IAAI,CAAC,eAAe,EAAE,CAAC;SACxB;IAEH,CAAC;IAGK,4CAAe,GAArB;;;;;4BACgB,qBAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;4BACpC,MAAM,EAAE,iBAAiB;4BACzB,SAAS,EAAE,uCAAuC;4BAClD,OAAO,EAAE,6CAA6C;4BACtD,OAAO,EAAE,CAAC;oCACR,IAAI,EAAE,SAAS;oCACf,OAAO,EAAE,UAAC,IAAI;oCACd,CAAC;iCACF,CAAC;yBACH,CAAC;;wBATI,KAAK,GAAG,SASZ;wBAEF,qBAAM,KAAK,CAAC,OAAO,EAAE;;wBAArB,SAAqB,CAAC;;;;;KACvB;IAEK,+CAAkB,GAAxB;;;;;;4BACsB,qBAAM,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC;4BAC1D,MAAM,EAAE,UAAU;4BAClB,OAAO,EAAE,CAAC;oCACR,IAAI,EAAE,eAAe;oCACrB,IAAI,EAAE,aAAa;oCACnB,IAAI,EAAE,SAAS;oCACf,OAAO,EAAE;wCACP,KAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;oCACrB,CAAC;iCACF;6BACA;yBACF,CAAC;;wBAXI,WAAW,GAAG,SAWlB;wBACF,qBAAM,WAAW,CAAC,OAAO,EAAE;;wBAA3B,SAA2B,CAAC;;;;;KAC7B;IAED,uCAAU,GAAV;QAAA,iBAcC;QAbC,IAAI,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,YAAY,EAAE,CAAC;QACpE,YAAY,CAAC,OAAO,CAAC,iBAAO;YAC1B,OAAO,CAAC,OAAO,CAAC,sBAAY;gBAC1B,mDAAmD;gBACnD,UAAU;gBACV,IAAG,YAAY,CAAC,KAAK,CAAC,IAAI,KAAI,CAAC,oBAAoB,IAAI,YAAY,CAAC,KAAK,CAAC,IAAI,WAAW,EAAC;oBAExF,IAAI,UAAU,GAAG,YAAuB,CAAC;oBACzC,YAAY,CAAC,OAAO,CAAC,qBAAqB,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;oBACxE,OAAO;iBACR;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED,yCAAY,GAAZ;QAAA,iBAmBC;QAlBC,IAAI,QAAQ,GAAW,CAAC,CAAC;QAEzB,IAAI,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,YAAY,EAAE,CAAC;QAC1E,cAAc,CAAC,OAAO,CAAC,kBAAQ;YAC7B,QAAQ,CAAC,OAAO,CAAC,uBAAa;gBAC5B,mDAAmD;gBACnD,UAAU;gBACV,IAAG,aAAa,CAAC,KAAK,CAAC,IAAI,KAAI,CAAC,oBAAoB,EAAC;oBACnD,KAAI,CAAC,oBAAoB,GAAG,aAAa,CAAC,qBAAqB,CAAC,CAAC;oBACjE,IAAI,WAAW,GAAG,aAAyB,CAAC;oBAC5C,YAAY,CAAC,OAAO,CAAC,sBAAsB,EAAE,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC;oBAC1E,QAAQ,EAAG,CAAC;oBACZ,KAAI,CAAC,UAAU,GAAG,QAAQ,CAAC;oBAC3B,OAAO;iBACR;YACH,CAAC,CAAC,CAAC;YACH,QAAQ,GAAG,CAAC,CAAC;QACf,CAAC,CAAC,CAAC;IACL,CAAC;IAED,qCAAQ,GAAR;QAAA,iBAqBC;QAnBC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,SAAS,CAAC,aAAG;YAEtE,IAAI,WAAW,GAAY,GAAG,CAAC,CAAC,CAAC,CAAC;YAClC,8BAA8B;YAC9B,KAAI,CAAC,eAAe,CAAC,eAAe,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC,kBAAQ;gBACzE,IAAG,QAAQ,CAAC,MAAM,GAAC,CAAC,EAAC;oBACrB,8BAA8B;oBAC9B,KAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,iBAAiB,CAAC;oBACvD,KAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC;oBAC5C,KAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;oBACzC,KAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;iBAClC;YACD,CAAC,CAAC;QAGN,CAAC,CAAC;IAIJ,CAAC;IA/HU,kBAAkB;QAL9B,+DAAS,CAAC;YACT,QAAQ,EAAE,qBAAqB;YAC/B,uHAA0C;;SAE3C,CAAC;+EAU4B,sDAAM,EAAiC,oEAAqB,EAAgB,mEAAW,EAAiB,kEAAe,EAAoB,wEAAgB,EAAmB,oDAAM,EAAiB,oDAAM,EAAoB,2EAAe,EAA2B,wFAAsB,EAAiB,8DAAe;OAThV,kBAAkB,CAoI9B;IAAD,yBAAC;CAAA;AApI8B","file":"perfil-invitado-perfil-invitado-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PerfilInvitadoPage } from './perfil-invitado.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PerfilInvitadoPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PerfilInvitadoPage]\n})\nexport class PerfilInvitadoPageModule {}\n","module.exports = \"\\n<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n      \\n     \\n     <div class=\\\"plusClass\\\" slot=\\\"end\\\">\\n      <ion-icon name=\\\"menu\\\" expand=\\\"icon-only\\\" color=\\\"light\\\" (click)=\\\"presentActionSheet()\\\"> </ion-icon>\\n    </div>\\n     \\n    <ion-title ([ngModel])=\\\"name\\\" color=\\\"light\\\">\\n      Vicrieel\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-card>\\n      <ion-card-header>\\n          <img class=\\\"icon\\\" src=\\\"../../assets/images/avatar.svg\\\">\\n          <ion-card-title class=\\\"ion-bold ion-text-center marginTop\\\">{{ name }}</ion-card-title>\\n\\n      </ion-card-header>\\n        \\n  </ion-card>\\n\\n  <ion-card>\\n    \\n      <ion-card-title class=\\\"ion-bold ion-text-center marginTop\\\"></ion-card-title>\\n      <div class=\\\"classVisitas marginTop\\\">\\n        <h1 class=\\\"ion-text-center\\\" color=\\\"primary\\\" ([ngModel])=\\\"numVisitas\\\">{{ numVisitas }} visitas a Vicrieel</h1>\\n               \\n      </div>\\n  </ion-card>\\n<div ([ngModel])=\\\"invitacion_activa\\\">\\n  <ion-fab vertical=\\\"bottom\\\" style=\\\"display:grid\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" *ngIf= \\\"invitacion_activa || estadoInvitado\\\">\\n  \\n    <ion-label>Invitaci√≥n nueva</ion-label>\\n    <img  class=\\\"icon_invitacion\\\" (click)=\\\"redirectIngresarCiudadela()\\\" src=\\\"../../assets/images/wedding-invitation.png\\\">  \\n  </ion-fab>\\n</div>\\n</ion-content>\\n\\n\\n\\n\\n\"","module.exports = \".icon {\\n  margin: auto;\\n  height: 35vw;\\n  width: 35vw;\\n  border-radius: 50%;\\n  box-shadow: 0 0 5px #3d3d3d; }\\n\\n.icon_invitacion {\\n  margin: auto;\\n  height: 20vw;\\n  width: 20vw;\\n  border-radius: 50%;\\n  box-shadow: 0 0 5px #3d3d3d; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb25hdGhhbm1hY2lhcy9Eb2N1bWVudHMvSm9uYXRoYW4vRXNwb2wvaW50ZWdyYWRvcmEvYXJ4YXBwQmV0YS9zcmMvYXBwL3BlcmZpbC1pbnZpdGFkby9wZXJmaWwtaW52aXRhZG8ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksWUFBWTtFQUNaLFlBQVk7RUFDWixXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLDJCQUFtQyxFQUFBOztBQUl2QztFQUNJLFlBQVk7RUFDWixZQUFZO0VBQ1osV0FBVztFQUNYLGtCQUFrQjtFQUNsQiwyQkFBbUMsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BlcmZpbC1pbnZpdGFkby9wZXJmaWwtaW52aXRhZG8ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmljb24ge1xuICAgIG1hcmdpbjogYXV0bztcbiAgICBoZWlnaHQ6IDM1dnc7IFxuICAgIHdpZHRoOiAzNXZ3OyBcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgYm94LXNoYWRvdzogMCAwIDVweCByZ2IoNjEsIDYxLCA2MSk7XG4gICBcbn1cblxuLmljb25faW52aXRhY2lvbiB7XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIGhlaWdodDogMjB2dzsgXG4gICAgd2lkdGg6IDIwdnc7IFxuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICBib3gtc2hhZG93OiAwIDAgNXB4IHJnYig2MSwgNjEsIDYxKTtcbiAgIFxufSJdfQ== */\"","import { Component, OnInit, NgZone } from '@angular/core';\nimport { NavController, ActionSheetController, AlertController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { ListaInvitadosPage, UsuarioInvitado } from '../lista-invitados/lista-invitados.page';\nimport { MenuController } from '@ionic/angular';\n\nimport { from, Observable } from 'rxjs';\nimport { AuthService } from '../servicios/auth.service';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { map } from 'rxjs/operators';\nimport { Usuario } from '../models/usuario'\nimport { Invitado } from '../models/invitado'\nimport { Socket } from 'ngx-socket-io';\nimport { auth } from 'firebase';\nimport { UsuariosService } from '../servicios/usuarios.service';\nimport { InvitadoServiceService } from '../servicios/InvitadoServiceService';\n\n@Component({\n  selector: 'app-perfil-invitado',\n  templateUrl: './perfil-invitado.page.html',\n  styleUrls: ['./perfil-invitado.page.scss'],\n})\nexport class PerfilInvitadoPage implements OnInit {\n  public mostrarNotificacion: boolean = false; \n  public name: string;\n  public idUsuarioRolInvitado: string;\n  public numVisitas: number = 0;\n  public notificaiones = [];\n  public idInvitado: string;\n  public invitacion_activa: boolean = false;\n  public estadoInvitado: boolean = false;\n  constructor(private router: Router, private actionSheetController: ActionSheetController, private auth: AuthService, private autFb: AngularFireAuth, private dataBase: AngularFirestore, public socketIO: Socket, public ngZone: NgZone, private usuarios: UsuariosService, private invitadoService: InvitadoServiceService, private alert: AlertController) {\n    \n    localStorage.setItem('objUsuarioEnSession', JSON.stringify(\"\"));\n    this.name = autFb.auth.currentUser.displayName;\n    this.idUsuarioRolInvitado = autFb.auth.currentUser.uid;\n    //debugger\n    this.getVisitante();\n    this.getUsuario();\n    //autFb.auth.currentUser.uid = this.idInvitado;\n  }\n \n  redirectIngresarCiudadela(){\n    \n    \n    \n    if(this.estadoInvitado ){\n      //this.numVisitas ++;\n      console.log(\"Numero de visitas es: \", this.numVisitas)\n      //console.log(this.idInvitado)\n      this.router.navigate([\"/mapa-visitante\"]);\n      //this.numVisitas ++;\n      //this.invitadoService.updateContadorInvitadoById(this.idInvitado, this.numVisitas );\n    }else{\n      this.presentNoAcceso();\n    }\n    \n  }\n  \n  \n  async presentNoAcceso() {\n    const alert = await this.alert.create({\n      header: 'Acesso denegado',\n      subHeader: 'A√∫n no est√° dentro de la urbanizaci√≥n',\n      message: 'Debe tener el acceso en garita de Vicrieel.',\n      buttons: [{\n        text: \"Aceptar\",\n        handler: (blah) => {\n        }\n      }]\n    });\n\n    await alert.present();\n  }\n\n  async presentActionSheet() {\n    const actionSheet = await this.actionSheetController.create({\n      header: 'Opciones',\n      buttons: [{\n        text: 'Cerrar sesion',\n        role: 'destructive',\n        icon: 'log-out',\n        handler: () => {\n          this.auth.logOut();\n        }\n      }\n      ]\n    });\n    await actionSheet.present();\n  }\n\n  getUsuario(){\n    var listaUsuario = this.dataBase.collection('users').valueChanges();\n    listaUsuario.forEach(usuario => {\n      usuario.forEach(campoUsuario => {\n        //console.log(campoInvitado['id_usuarioVisitante'])\n        //debugger\n        if(campoUsuario['uid'] == this.idUsuarioRolInvitado && campoUsuario['rol'] == \"residente\"){\n          \n          let objUsuario = campoUsuario as Usuario;\n          localStorage.setItem('objUsuarioEnSession', JSON.stringify(objUsuario));\n          return;\n        }\n      });\n    });\n  }\n\n  getVisitante(){\n    var contador: number = 0;\n\n    var listaInvitados = this.dataBase.collection('invitados').valueChanges();\n    listaInvitados.forEach(invitado => {\n      invitado.forEach(campoInvitado => {\n        //console.log(campoInvitado['id_usuarioVisitante'])\n        //debugger\n        if(campoInvitado['uid'] == this.idUsuarioRolInvitado){\n          this.idUsuarioRolInvitado = campoInvitado['id_usuarioResidente'];\n          let objInvitado = campoInvitado as Invitado;\n          localStorage.setItem('objInvitadoEnSession', JSON.stringify(objInvitado));\n          contador ++;\n          this.numVisitas = contador;\n          return;\n        }\n      });\n      contador = 0;\n    });\n  }\n\n  ngOnInit() {\n\n    this.usuarios.getUsersRolInvitado(this.idUsuarioRolInvitado).subscribe(res=> {\n      \n        let invitadoTmp: Usuario = res[0];\n        //console.log(invitadoTmp.uid)\n        this.invitadoService.getInvitadoById(invitadoTmp[\"uid\"]).subscribe(invitado => {\n          if(invitado.length>0){\n          //console.log(invitado.length)\n          this.invitacion_activa = invitado[0].invitacion_activa;\n          this.numVisitas = invitado[0].numeroVisitas;\n          this.estadoInvitado = invitado[0].estado;\n          this.idInvitado = invitado[0].id;\n        }\n        })\n\n      \n    })\n\n   \n\n  }\n\n\n  \n\n}\n"],"sourceRoot":""}